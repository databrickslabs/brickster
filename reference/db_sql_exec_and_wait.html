<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Execute SQL Query and Wait for Completion — db_sql_exec_and_wait • brickster</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Execute SQL Query and Wait for Completion — db_sql_exec_and_wait"><meta name="description" content="Internal helper that executes a query and waits for completion.
This separates the execution/polling logic from result fetching."><meta property="og:description" content="Internal helper that executes a query and waits for completion.
This separates the execution/polling logic from result fetching."><meta property="og:image" content="https://databrickslabs.github.io/brickster/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">brickster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cluster-management.html">Cluster Management</a></li>
    <li><a class="dropdown-item" href="../articles/managing-jobs.html">Job Management</a></li>
    <li><a class="dropdown-item" href="../articles/remote-repl.html">Databricks REPL</a></li>
    <li><a class="dropdown-item" href="../articles/setup-auth.html">Connect to a Databricks Workspace</a></li>
    <li><a class="dropdown-item" href="../articles/sql-backend.html">`{DBI}`/`{dbplyr}` backend</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/databrickslabs/brickster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Execute SQL Query and Wait for Completion</h1>
      <small class="dont-index">Source: <a href="https://github.com/databrickslabs/brickster/blob/main/R/sql-query-execution.R" class="external-link"><code>R/sql-query-execution.R</code></a></small>
      <div class="d-none name"><code>db_sql_exec_and_wait.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Internal helper that executes a query and waits for completion.
This separates the execution/polling logic from result fetching.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">db_sql_exec_and_wait</span><span class="op">(</span></span>
<span>  <span class="va">warehouse_id</span>,</span>
<span>  <span class="va">statement</span>,</span>
<span>  catalog <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  schema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row_limit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  byte_limit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wait_timeout <span class="op">=</span> <span class="st">"0s"</span>,</span>
<span>  disposition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXTERNAL_LINKS"</span>, <span class="st">"INLINE"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARROW_STREAM"</span>, <span class="st">"JSON_ARRAY"</span><span class="op">)</span>,</span>
<span>  host <span class="op">=</span> <span class="fu"><a href="db_host.html">db_host</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  token <span class="op">=</span> <span class="fu"><a href="db_token.html">db_token</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  show_progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-warehouse-id">warehouse_id<a class="anchor" aria-label="anchor" href="#arg-warehouse-id"></a></dt>
<dd><p>String, ID of warehouse upon which to execute a statement.</p></dd>


<dt id="arg-statement">statement<a class="anchor" aria-label="anchor" href="#arg-statement"></a></dt>
<dd><p>String, the SQL statement to execute. The statement can
optionally be parameterized, see <code>parameters</code>.</p></dd>


<dt id="arg-catalog">catalog<a class="anchor" aria-label="anchor" href="#arg-catalog"></a></dt>
<dd><p>String, sets default catalog for statement execution, similar
to <code>USE CATALOG</code> in SQL.</p></dd>


<dt id="arg-schema">schema<a class="anchor" aria-label="anchor" href="#arg-schema"></a></dt>
<dd><p>String, sets default schema for statement execution, similar
to <code>USE SCHEMA</code> in SQL.</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>List of Named Lists, parameters to pass into a SQL
statement containing parameter markers.</p>
<p>A parameter consists of a name, a value, and <em>optionally</em> a type.
To represent a <code>NULL</code> value, the value field may be omitted or set to <code>NULL</code>
explicitly.</p>
<p>See <a href="https://docs.databricks.com/api/workspace/statementexecution/executestatement" class="external-link">docs</a>
for more details.</p></dd>


<dt id="arg-row-limit">row_limit<a class="anchor" aria-label="anchor" href="#arg-row-limit"></a></dt>
<dd><p>Integer, applies the given row limit to the statement's
result set, but unlike the <code>LIMIT</code> clause in SQL, it also sets the
<code>truncated</code> field in the response to indicate whether the result was trimmed
due to the limit or not.</p></dd>


<dt id="arg-byte-limit">byte_limit<a class="anchor" aria-label="anchor" href="#arg-byte-limit"></a></dt>
<dd><p>Integer, applies the given byte limit to the statement's
result size. Byte counts are based on internal data representations and
might not match the final size in the requested format. If the result was
truncated due to the byte limit, then <code>truncated</code> in the response is set to
true. When using <code>EXTERNAL_LINKS</code> disposition, a default byte_limit of
100 GiB is applied if <code>byte_limit</code> is not explicitly set.</p></dd>


<dt id="arg-wait-timeout">wait_timeout<a class="anchor" aria-label="anchor" href="#arg-wait-timeout"></a></dt>
<dd><p>Initial wait timeout (default "30s")</p></dd>


<dt id="arg-disposition">disposition<a class="anchor" aria-label="anchor" href="#arg-disposition"></a></dt>
<dd><p>One of <code>"INLINE"</code> (default) or <code>"EXTERNAL_LINKS"</code>. See
<a href="https://docs.databricks.com/api/workspace/statementexecution/executestatement" class="external-link">docs</a>
for details.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>One of <code>"JSON_ARRAY"</code> (default), <code>"ARROW_STREAM"</code>, or <code>"CSV"</code>.
See <a href="https://docs.databricks.com/api/workspace/statementexecution/executestatement" class="external-link">docs</a>
for details.</p></dd>


<dt id="arg-host">host<a class="anchor" aria-label="anchor" href="#arg-host"></a></dt>
<dd><p>Databricks workspace URL, defaults to calling <code><a href="db_host.html">db_host()</a></code>.</p></dd>


<dt id="arg-token">token<a class="anchor" aria-label="anchor" href="#arg-token"></a></dt>
<dd><p>Databricks workspace token, defaults to calling <code><a href="db_token.html">db_token()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Status response with manifest when query completes successfully</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/zacdav-db" class="external-link">Zac Davies</a>, <a href="https://www.linkedin.com/in/raphaelkurlansik/" class="external-link">Rafi Kurlansik</a>, <a href="https://www.databricks.com" class="external-link"><img src="https://databricks.com/wp-content/uploads/2019/12/cropped-databricks-icon-192x192.png" width="25" alt="Databricks"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

